@model IEnumerable<AksonApp.Models.Post>
@using AksonApp.Models
@{
    ViewBag.Title = "Home Page";
    ApplicationDbContext db = new ApplicationDbContext();
    var total = db.Post.Count();
    var count = 0;
    var countTwo = 0;
}
<div id="myCarousel" style="max-width:100%" class="carousel slide" data-ride="carousel" data-interval="6000">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
        <li data-target="#myCarousel" data-slide-to="3"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
            <div class="carousel-caption" role="option">
                <p>
                    Learn how to build ASP.NET apps that can run anywhere.
                    <a class="btn btn-default" href="#">
                        Learn More
                    </a>
                </p>
            </div>
        </div>
        <div class="item">
            <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
            <div class="carousel-caption" role="option">
                <p>
                    There are powerful new features in Visual Studio for building modern web apps.
                    <a class="btn btn-default" href="#">
                        Learn More
                    </a>
                </p>
            </div>
        </div>
        <div class="item">
            <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
            <div class="carousel-caption" role="option">
                <p>
                    Bring in libraries from NuGet and npm, and automate tasks using Grunt or Gulp.
                    <a class="btn btn-default" href="#">
                        Learn More
                    </a>
                </p>
            </div>
        </div>
        <div class="item">
            <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
            <div class="carousel-caption" role="option">
                <p>
                    Learn how Microsoft's Azure cloud platform allows you to build, deploy, and scale web apps.
                    <a class="btn btn-default" href="#">
                        Learn More
                    </a>
                </p>
            </div>
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<hr />
<div class="row" style="text-align:center">
    <div class="col-sm-4">
        <img class="responsive-img" src="~/Images/1.jpg" width="350" />
        <h3 class="blue-grey-text light">Finacial Calculator</h3>
        <p><a class="btn btn-default" href="@Url.Action("Calculator","Home")">Get Estimate</a></p>
    </div>
    <div class="col-sm-4">
        <img class="responsive-img" src="~/Images/1.jpg" width="350" />
        <h3 class="blue-grey-text light">Book a Test Drive</h3>
        <p><a class="btn btn-default" href="@Url.Action("Create","TestDrives")">Book Now</a></p>
    </div>
    <div class="col-sm-4">
        <img class="responsive-img" src="~/Images/1.jpg" width="350" />
        <h3 class="blue-grey-text light">Service Booking</h3>
        <p><a class="btn btn-default" href="@Url.Action("Create","Bookings")">Book Now</a></p>
    </div>
</div>
<hr />
<div class="row">
    <div class="col-sm-4">
        <h2 style="text-align:center"><b>View Our Car Range</b></h2>
        <div id="myCarousel" style="max-width:100%" class="carousel slide" data-ride="carousel" data-interval="6000">
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
                <li data-target="#myCarousel" data-slide-to="3"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("CarResults","Cars")">
                                View Our Cars
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("CarResults","Cars")">
                                View Our Cars
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("CarResults","Cars")">
                                View Our Cars
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("CarResults","Cars")">
                                View Our Cars
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-4">
        <h2 style="text-align:center"><b>Cars For Hire</b></h2>
        <div id="myCarousel" style="max-width:100%" class="carousel slide" data-ride="carousel" data-interval="6000">
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
                <li data-target="#myCarousel" data-slide-to="3"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("CarResultsForHire","Cars")">
                                View Cars For Hire
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("CarResultsForHire","Cars")">
                                View Cars For Hire
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("CarResultsForHire","Cars")">
                                View Cars For Hire
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("CarResultsForHire","Cars")">
                                View Cars For Hire
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-4">
        <h2 style="text-align:center"><b>Buy Spare Online</b></h2>
        <div id="myCarousel" style="max-width:100%" class="carousel slide" data-ride="carousel" data-interval="6000">
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
                <li data-target="#myCarousel" data-slide-to="3"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("ProductResults","ManageProducts")">
                                View Spares
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("ProductResults","ManageProducts")">
                                View Spares
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("ProductResults","ManageProducts")">
                                View Spares
                            </a>
                        </p>
                    </div>
                </div>
                <div class="item">
                    <img src="~/Images/testdrive.jpg" alt="ASP.NET" class="img-responsive" />
                    <div class="carousel-caption" role="option">
                        <p>
                            <a class="btn btn-default" href="@Url.Action("ProductResults","ManageProducts")">
                                View Spares
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<hr />
<div class="row">
    <h2 style="text-align:center"><b>Our Blog</b></h2>
</div>


@foreach (var item in Model)
{
    {
        count = db.Comment.Count(m => m.BlogId == item.Id);
    }
    if (!User.Identity.IsAuthenticated)
    {
        <a href="#" data-toggle="modal" data-target=".bd-example-modal-sm" class="text-secondary" style="text-decoration:none">
            <div class="jumbotron" style="padding:1em;max-width:100%;text-align:center">
                <div class="row">
                    <div class="col-sm-6">
                        <img src="~/BlogPics/@item.Image" width="400" height="300" style="max-width:100%" />
                    </div>
                    <div class="col-sm-6" style="text-align:center;padding-top:2em">
                        <h1>@item.Title</h1>
                        <p class="lead">
                            @if (item.Blurb.Length > 50)
                            {
                                @item.Blurb.Substring(0, 50)<text>...</text>
                            }
                            else
                            {
                                @item.Blurb
                            }
                        </p>
                        @{
                            var postId = item.Id.ToString();
                            countTwo = db.LikeTable.Count(m => m.PostId == item.Id.ToString());
                            var author = db.UserProfile.Where(m => m.Email == item.Author).Select(m => m.FirstName + " " + m.LastName).FirstOrDefault();
                        }
                        Author: <b>@author</b> <br />
                        <b style="color:cornflowerblue"><i class="fa fa-comments"></i> @count &nbsp;&nbsp;<i class="fa fa-thumbs-o-up"></i> @countTwo</b>
                    </div>
                </div>
            </div>
        </a>
    }
    else
    {
        <a href="@Url.Action("Details","Posts", new { id = item.Ref, postid = item.Id })" class="text-secondary" style="text-decoration:none">
            <div class="jumbotron" style="padding:1em;max-width:100%;text-align:center">
                <div class="row">
                    <div class="col-sm-6">
                        <img src="~/BlogPics/@item.Image" width="300" height="200" style="max-width:100%" />
                    </div>
                    <div class="col-sm-6" style="text-align:center;padding-top:2em">
                        <h1>@item.Title</h1>
                        <p class="lead">
                            @if (item.Blurb.Length > 50)
                            {
                                @item.Blurb.Substring(0, 50)<text>...</text>
                            }
                            else
                            {
                                @item.Blurb
                            }
                        </p>
                        @{
                            var postId = item.Id.ToString();
                            countTwo = db.LikeTable.Count(m => m.PostId == item.Id.ToString());
                            var author = db.UserProfile.Where(m => m.Email == item.Author).Select(m => m.FirstName + " " + m.LastName).FirstOrDefault();
                        }
                        Author: <b>@author</b> <br />
                        <b style="color:cornflowerblue"><i class="fa fa-comments"></i> @count &nbsp;&nbsp;<i class="fa fa-thumbs-o-up"></i> @countTwo</b>
                    </div>
                </div>
            </div>
        </a>
    }


}

<div class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">

                <button class="close" style="color:darkred" data-dismiss="modal">&times;</button>
                <h3><b>Aksons Wheels Blog</b></h3>
                <p>
                    <b>
                        Login to view Blog details, like blog or make comment.
                    </b>
                </p>
            </div>

        </div>
    </div>
</div>